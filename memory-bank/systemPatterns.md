# 系統模式與架構

## 主要架構

-   **前後端分離**: Golang 後端 API + Next.js 前端管理介面。
-   **微服務化 (部分)**: 獨立的 Python AI 服務，負責模型推理。
-   **獨立遊戲專案**: 後台系統與遊戲客戶端/伺服器分離，通過 API/WebSocket 交互。

## 設計模式

-   **API Gateway (隱含)**: Golang 後端作為前端和 AI 服務的統一入口。
-   **Repository/數據訪問層**: 使用 GORM 封裝資料庫操作。
-   **服務客戶端**: Golang 中封裝對 Python AI 服務的調用。
-   **定時任務 (Cron)**: 用於定期的特徵提取和行為分析。
-   **JWT 身份驗證**: 用於保護後台管理 API。
-   **基於角色的訪問控制 (RBAC)**: 管理不同後台用戶的權限（例如 Admin, 代理商, 經銷商對開分功能有不同操作權限）。

## 數據流模式

-   **日誌聚合**: 遊戲專案將日誌發送給後台。
-   **特徵工程 -> 模型推理 -> 儲存**: 數據從日誌提取特徵，發送給 AI 服務，結果存回數據庫。
-   **請求 -> 特徵 -> AI 決策 -> 響應**: 對弈請求觸發特徵查詢、AI 對弈服務調用，並返回行動。

## 部署模式

-   **容器化**: 使用 Docker 打包各個服務。
-   **容器編排**: 使用 Kubernetes 進行部署、擴展和管理。 